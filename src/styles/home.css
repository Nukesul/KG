@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap");

:root{
  --primary:#e32636;
  --accent:#ffd700;
  --white:#fff;
  --black:#000;

  --surface: rgba(0,0,0,.46);
  --surface2: rgba(0,0,0,.62);
  --muted: rgba(255,255,255,.90);

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  --app-vh: 100vh;
  --bar-h: 92px;
  --radius: 18px;
}

*{ margin:0; padding:0; box-sizing:border-box; }
html,body{ height:100%; }

body{
  font-family:"Montserrat", system-ui, -apple-system, sans-serif;
  background: var(--black);
  color: var(--white);
  overflow:hidden;
}

.app-shell{
  height: var(--app-vh);
  height: 100svh;
  display:grid;
  grid-template-rows: auto 1fr auto;
  overflow:hidden;
}

/* header */
.header{
  padding-top: var(--safe-top);
  height: clamp(60px, 10vh, 86px);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 30;
  transition: opacity .25s ease, transform .25s ease;
}
.header.hidden-ui{
  opacity: 0;
  transform: translateY(-6px);
  pointer-events: none;
}
.logo{
  width: clamp(120px, 24vw, 190px);
  height:auto;
  filter: drop-shadow(0 10px 24px rgba(0,0,0,.35));
}

/* stage */
.stage{
  position: relative;
  overflow:hidden;
}
.video-layer{
  position:absolute;
  inset:0;
}
.hero-video{
  position:absolute;
  inset:-2%;
  width:104%;
  height:104%;
  object-fit:cover;
  transition: opacity .45s ease;
  will-change: opacity;
}
.hero-video.fade-in{ opacity:1; }
.hero-video.fade-out{ opacity:0; }

/* overlays: когда UI скрыто — меньше затемнение */
.overlay{
  position:absolute;
  inset:0;
  transition: opacity .25s ease;
}
.overlay-strong{
  opacity: 1;
  background: linear-gradient(135deg, rgba(0,0,0,.40), rgba(0,0,0,.08) 65%, rgba(0,0,0,.22));
}
.overlay-weak{
  opacity: .45;
  background: linear-gradient(135deg, rgba(0,0,0,.25), transparent 70%);
}

.vignette{
  position:absolute;
  inset:0;
  background: radial-gradient(circle at center, transparent 52%, rgba(0,0,0,.42));
  pointer-events:none;
}

/* ✅ mini-info — маленький, аккуратный, не мешает */
.mini-info{
  position:absolute;
  top: clamp(72px, 10vh, 120px);
  left: clamp(12px, 4vw, 32px);
  right: clamp(12px, 4vw, 32px);
  max-width: 520px;
  z-index: 16;

  padding: 12px 14px;
  border-radius: var(--radius);
  background: rgba(0,0,0,.22);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,.06);
  box-shadow: 0 14px 34px rgba(0,0,0,.24);
}

.mini-top{
  display:flex;
  justify-content:space-between;
  gap: 12px;
  align-items:flex-start;
}
.mini-title{
  font-size: clamp(1.15rem, 4.4vw, 1.9rem);
  font-weight: 600;
  line-height: 1.15;
  text-shadow: 0 2px 10px rgba(0,0,0,.35);

  display:-webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow:hidden;
}
.mini-btn{
  border:none;
  cursor:pointer;
  background: rgba(255,255,255,.10);
  color: var(--white);
  padding: 8px 12px;
  border-radius: 12px;
  font-weight: 600;
  white-space: nowrap;
  transition: background .16s ease, transform .16s ease;
}
.mini-btn:hover{ background: rgba(255,255,255,.16); transform: translateY(-1px); }
.mini-sub{
  margin-top: 6px;
  opacity:.92;
  color: var(--muted);
  font-size: .95rem;
}
.mini-desc{
  margin-top: 8px;
  opacity:.92;
  color: rgba(255,255,255,.92);
  line-height: 1.45;
  font-weight: 300;
  font-size: .98rem;

  display:-webkit-box;
  -webkit-line-clamp: 2; /* ещё меньше мешает видео */
  -webkit-box-orient: vertical;
  overflow:hidden;
}

/* controls */
.controls{
  position:absolute;
  left: clamp(12px, 4vw, 32px);
  bottom: 16px;
  z-index: 18;
  display:flex;
  gap: 10px;
}
.ctrl-btn{
  border:none;
  cursor:pointer;
  background: rgba(227,38,54,.30);
  color: var(--white);
  padding: 10px 16px;
  border-radius: 14px;
  min-width: 54px;
  font-size: 1rem;
  box-shadow: 0 12px 28px rgba(0,0,0,.32);
  transition: transform .16s ease, background .16s ease;
  touch-action: manipulation;
}
.ctrl-btn:hover{ background: rgba(227,38,54,.55); transform: translateY(-1px); }
.ctrl-btn.secondary{
  background: rgba(255,255,255,.10);
}
.ctrl-btn.secondary:hover{ background: rgba(255,255,255,.16); }

/* bottom sheet */
.sheet-backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.42);
  z-index: 40;
}
.sheet{
  position:absolute;
  left:0; right:0; bottom:0;
  z-index: 41;

  max-height: 62vh;
  max-height: 62svh;
  padding-bottom: calc(14px + var(--safe-bottom));
  background: rgba(0,0,0,.88);
  border-top-left-radius: 22px;
  border-top-right-radius: 22px;
  border-top: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 -20px 40px rgba(0,0,0,.45);
}
.sheet-handle{
  width:44px;
  height:5px;
  border-radius:999px;
  background: rgba(255,255,255,.22);
  margin: 10px auto 6px auto;
}
.sheet-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
  padding: 10px 16px 8px 16px;
}
.sheet-kicker{ font-size:.85rem; opacity:.8; color: var(--muted); }
.sheet-title{ font-size:1.15rem; font-weight:600; line-height:1.2; }
.sheet-close{
  border:none;
  cursor:pointer;
  background: rgba(255,255,255,.10);
  color: var(--white);
  padding: 8px 12px;
  border-radius: 12px;
}
.sheet-close:hover{ background: rgba(255,255,255,.16); }
.sheet-body{
  padding: 8px 16px 14px 16px;
  overflow:auto;
  max-height: calc(62vh - 74px);
}
.sheet-body p{
  line-height: 1.55;
  font-weight: 300;
  color: rgba(255,255,255,.92);
}

/* footer months */
.months-bar{
  height: calc(var(--bar-h) + var(--safe-bottom));
  padding: 10px 12px calc(10px + var(--safe-bottom)) 12px;
  background: linear-gradient(to top, rgba(0,0,0,.90), rgba(0,0,0,.15));
  border-top: 1px solid rgba(255,255,255,.06);
  overflow:hidden;
  z-index: 35;
}
.months-scroll{
  display:flex;
  gap: 10px;
  overflow-x:auto;
  padding: 8px 0 10px 0;
  scrollbar-width:none;
  -webkit-overflow-scrolling: touch;
  scroll-behavior:smooth;
  scroll-snap-type:x mandatory;
  touch-action: pan-x;
}
.months-scroll::-webkit-scrollbar{ display:none; }

.month-btn{
  flex: 0 0 auto;
  min-width: 72px;
  padding: 12px 14px;
  border:none;
  border-radius: 14px;
  background: var(--surface);
  color: var(--white);
  font-weight: 700;
  font-size: .98rem;
  cursor:pointer;
  scroll-snap-align:center;
  box-shadow: 0 10px 22px rgba(0,0,0,.24);
  transition: transform .16s ease, background .16s ease;
}
.month-btn:hover{ background: rgba(0,0,0,.64); transform: translateY(-1px); }
.month-btn.active{
  background: rgba(255,255,255,.10);
  color: var(--accent);
  box-shadow: 0 12px 28px rgba(0,0,0,.30);
}

/* hint */
.scroll-hint{
  position: sticky;
  right: 0;
  padding-left: 14px;
  background: linear-gradient(to left, rgba(0,0,0,.88), transparent);
  display:flex;
  align-items:center;
  flex-shrink:0;
  transition: opacity .25s ease;
}
.months-scroll.scrolled-to-end .scroll-hint{ opacity:0; }
.scroll-arrow{
  width: 22px; height: 22px;
  color: var(--primary);
  opacity:.85;
  animation:pulse 1.4s infinite;
}
@keyframes pulse{
  0%,100%{ transform: translateX(0); }
  50%{ transform: translateX(5px); }
}

/* progress */
.scroll-indicator{
  height: 3px;
  background: rgba(255,255,255,.12);
  border-radius: 999px;
  overflow:hidden;
}
.scroll-progress{
  height:100%;
  background: var(--primary);
  width:0%;
  transition: width .2s ease;
  box-shadow: 0 0 12px rgba(227,38,54,.55);
}

@media (max-width: 480px){
  :root{ --bar-h: 94px; }
  .month-btn{ min-width: 64px; font-size: .92rem; padding: 12px 12px; }
  .mini-desc{ -webkit-line-clamp: 1; } /* почти не мешает видео */
}
